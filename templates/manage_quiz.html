{% extends 'base.html' %}
{% block title %} Manage Quiz Content - Quiz_Master {% endblock %}
{% block content %}

<div class="container mt-4">
    <h3 class="text-center welcome-title">Manage Quiz Content</h3>
    <p class="text-center welcome-subtitle">Add, edit, or delete subjects, chapters, and quizzes.</p>

    <!-- Add Subject Button -->
    <div class="text-center">
        <a href="{{ url_for('add_subject') }}" class="btn btn-success btn-lg">Add New Subject</a>
    </div>

    <div class="container-fluid mt-3">
        <div class="row">
            {% for subject in subjects %}
            <div class="card-subj col-12 mb-5" style="border-radius: 5px; padding: 15px;">
                <div class="card-body">
                    <div class="row m-2">
                        <div class="col-8">
                            <h4 class="welcome-title" style="color: rgb(14, 5, 5); font-size:larger;">{{ subject.subj_name }}</h4>
                            <p class="welcome-subtitle" style="color: rgb(27, 10, 10); font-size:large;">{{ subject.subj_descr }}</p>
                        </div>
                        <div class="col-4 d-flex justify-content-end align-items-center">
                            <a href="{{ url_for('add_chapter') }}" class="btn btn-success btn-sm mx-1">Add Chapter</a>
                            <a href="{{ url_for('edit_subject', subject_id=subject.subj_id) }}" class="btn btn-secondary btn-sm mx-1">Edit</a>
                            <a href="{{ url_for('delete_subject', subject_id=subject.subj_id) }}" class="btn btn-danger btn-sm mx-1">Delete</a>
                        </div>
                    </div>

                    <!-- Code to display chapters in the subject -->
                    <div class="row mt-3">
                        {% for chapter in subject.chapters %}
                        <div class="card-chap col-3 m-2" style="width: 24rem;">
                            <div class="card-body d-flex flex-column justify-content-between m-2" style="min-height: 150px; ">
                                <div>
                                    <h5 class="welcome-title text-center" style="color: rgb(14, 5, 5); font-size:larger;">{{ chapter.chap_name }}</h5>
                                    <p class="welcome-subtitle" style="color: rgb(27, 10, 10); font-size:large;">{{ chapter.chap_descr }}</p>
                                </div>
                                <div class="d-flex justify-content-end mt-3">
                                    <a href="{{ url_for('quizzes', chapter_id=chapter.chap_id) }}" class="btn btn-primary btn-sm mx-1">Quizzes</a>
                                    <a href="{{ url_for('edit_chapter', chapter_id=chapter.chap_id) }}" class="btn btn-secondary btn-sm mx-1">Edit</a>
                                    <a href="{{ url_for('delete_chapter', chapter_id=chapter.chap_id) }}" class="btn btn-danger btn-sm mx-1">Delete</a>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}